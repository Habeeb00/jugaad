const CACHE_NAME="add2cal-v16",ASSETS_TO_CACHE=["/","/index.html","/styles.css","/app.js","/manifest.json","/icon.svg"];self.addEventListener("install",e=>{e.waitUntil(caches.open(CACHE_NAME).then(e=>(console.log("Caching app assets"),e.addAll(ASSETS_TO_CACHE))).then(()=>self.skipWaiting()))}),self.addEventListener("activate",e=>{e.waitUntil(caches.keys().then(e=>Promise.all(e.filter(e=>e!==CACHE_NAME).map(e=>caches.delete(e)))).then(()=>self.clients.claim()))}),self.addEventListener("fetch",e=>{const t=new URL(e.request.url);"/share"!==t.pathname&&"/share.html"!==t.pathname?t.hostname===self.location.hostname?e.respondWith(caches.match(e.request).then(t=>t||fetch(e.request).then(t=>{if(!t||200!==t.status)return t;const s=t.clone();return caches.open(CACHE_NAME).then(t=>{t.put(e.request,s)}),t})).catch(()=>{if("navigate"===e.request.mode)return caches.match("/index.html")})):e.respondWith(fetch(e.request)):e.respondWith(caches.match("/index.html").then(e=>e||fetch("/index.html")))});